(()=>{"use strict";(()=>{const s=JSON.parse('{"Backquote":{"class":"Backquote","english":"`","russian":"ё","shift-english":"~","shift-russian":"Ё"},"Digit1":{"class":"Digit1","english":"1","russian":"1","shift-english":"!","shift-russian":"~"},"Digit2":{"class":"Digit2","english":"2","russian":"2","shift-english":"@","shift-russian":"\\""},"Digit3":{"class":"Digit3","english":"3","russian":"3","shift-english":"#","shift-russian":"№"},"Digit4":{"class":"Digit4","english":"4","russian":"4","shift-english":"$","shift-russian":";"},"Digit5":{"class":"Digit5","english":"5","russian":"5","shift-english":"%","shift-russian":"%"},"Digit6":{"class":"Digit6","english":"6","russian":"6","shift-english":"^","shift-russian":":"},"Digit7":{"class":"Digit7","english":"7","russian":"7","shift-english":"&","shift-russian":"?"},"Digit8":{"class":"Digit8","english":"8","russian":"8","shift-english":"*","shift-russian":"*"},"Digit9":{"class":"Digit9","english":"9","russian":"9","shift-english":"(","shift-russian":"("},"Digit0":{"class":"Digit0","english":"0","russian":"0","shift-english":")","shift-russian":")"},"Minus":{"class":"Minus","english":"-","russian":"-","shift-english":"_","shift-russian":"_"},"Equal":{"class":"Equal","english":"=","russian":"=","shift-english":"+","shift-russian":"+"},"Backspace":{"class":"Backspace","english":"Backspace","russian":"Backspace","shift-english":"Backspace","shift-russian":"Backspace"},"Tab":{"class":"Tab","english":"Tab","russian":"Tab","shift-english":"Tab","shift-russian":"Tab"},"KeyQ":{"class":"KeyQ","english":"q","russian":"й","shift-english":"Q","shift-russian":"Й"},"KeyW":{"class":"KeyW","english":"w","russian":"ц","shift-english":"W","shift-russian":"Ц"},"KeyE":{"class":"KeyE","english":"e","russian":"у","shift-english":"E","shift-russian":"у"},"KeyR":{"class":"KeyR","english":"r","russian":"к","shift-english":"R","shift-russian":"К"},"KeyT":{"class":"KeyT","english":"t","russian":"е","shift-english":"T","shift-russian":"Е"},"KeyY":{"class":"KeyY","english":"y","russian":"н","shift-english":"Y","shift-russian":"Н"},"KeyU":{"class":"KeyU","english":"u","russian":"г","shift-english":"U","shift-russian":"Г"},"KeyI":{"class":"KeyI","english":"i","russian":"ш","shift-english":"I","shift-russian":"Ш"},"KeyO":{"class":"KeyO","english":"o","russian":"щ","shift-english":"O","shift-russian":"Щ"},"KeyP":{"class":"KeyP","english":"p","russian":"з","shift-english":"P","shift-russian":"З"},"BracketLeft":{"class":"BracketLeft","english":"[","russian":"х","shift-english":"{","shift-russian":"Х"},"BracketRight":{"class":"BracketRight","english":"]","russian":"ъ","shift-english":"}","shift-russian":"Ъ"},"Backslash":{"class":"Backslash","english":"\\\\","russian":"\\\\","shift-english":"|","shift-russian":"/"},"Delete":{"class":"Delete","english":"Del","russian":"Del","shift-english":"Del","shift-russian":"Del"},"CapsLock":{"class":"CapsLock","english":"CapsLock","russian":"CapsLock","shift-english":"CapsLock","shift-russian":"CapsLock"},"KeyA":{"class":"KeyA","english":"a","russian":"ф","shift-english":"A","shift-russian":"Ф"},"KeyS":{"class":"KeyS","english":"s","russian":"ы","shift-english":"S","shift-russian":"Ы"},"KeyD":{"class":"KeyD","english":"d","russian":"в","shift-english":"D","shift-russian":"В"},"KeyF":{"class":"KeyF","english":"f","russian":"а","shift-english":"F","shift-russian":"А"},"KeyG":{"class":"KeyG","english":"g","russian":"п","shift-english":"G","shift-russian":"П"},"KeyH":{"class":"KeyH","english":"h","russian":"р","shift-english":"H","shift-russian":"Р"},"KeyJ":{"class":"KeyJ","english":"j","russian":"о","shift-english":"J","shift-russian":"О"},"KeyK":{"class":"KeyK","english":"k","russian":"л","shift-english":"K","shift-russian":"Л"},"KeyL":{"class":"KeyL","english":"l","russian":"д","shift-english":"L","shift-russian":"Д"},"Semicolon":{"class":"Semicolon","english":";","russian":"ж","shift-english":":","shift-russian":"Ж"},"Quote":{"class":"Quote","english":"\'","russian":"э","shift-english":"\\"","shift-russian":"Э"},"Enter":{"class":"Enter","english":"Enter","russian":"Enter","shift-english":"Enter","shift-russian":"Enter"},"ShiftLeft":{"class":"ShiftLeft","english":"Shift","russian":"Shift","shift-english":"Shift","shift-russian":"Shift"},"KeyZ":{"class":"KeyZ","english":"z","russian":"я","shift-english":"Z","shift-russian":"Я"},"KeyX":{"class":"KeyX","english":"x","russian":"ч","shift-english":"X","shift-russian":"Ч"},"KeyC":{"class":"KeyC","english":"c","russian":"с","shift-english":"C","shift-russian":"С"},"KeyV":{"class":"KeyV","english":"v","russian":"м","shift-english":"V","shift-russian":"М"},"KeyB":{"class":"KeyB","english":"b","russian":"и","shift-english":"B","shift-russian":"И"},"KeyN":{"class":"KeyN","english":"n","russian":"т","shift-english":"N","shift-russian":"Т"},"KeyM":{"class":"KeyM","english":"m","russian":"ь","shift-english":"M","shift-russian":"Ь"},"Comma":{"class":"Comma","english":",","russian":"б","shift-english":"<","shift-russian":"Б"},"Period":{"class":"Period","english":".","russian":"ю","shift-english":">","shift-russian":"Ю"},"Slash":{"class":"Slash","english":"/","russian":".","shift-english":"?","shift-russian":","},"ArrowUp":{"class":"ArrowUp","english":"▲","russian":"▲","shift-english":"▲","shift-russian":"▲"},"ShiftRight":{"class":"ShiftRight","english":"Shift","russian":"Shift","shift-english":"Shift","shift-russian":"Shift"},"ControlLeft":{"class":"ControlLeft","english":"Ctrl","russian":"Ctrl","shift-english":"Ctrl","shift-russian":"Ctrl"},"MetaLeft":{"class":"MetaLeft","english":"Win","russian":"Win","shift-english":"Win","shift-russian":"Win"},"AltLeft":{"class":"AltLeft","english":"Alt","russian":"Alt","shift-english":"Alt","shift-russian":"Alt"},"Space":{"class":"Space","english":" ","russian":" ","shift-english":" ","shift-russian":" "},"AltRight":{"class":"AltRight","english":"Alt","russian":"Alt","shift-english":"Alt","shift-russian":"Alt"},"ArrowLeft":{"class":"ArrowLeft","english":"◄","russian":"◄","shift-english":"◄","shift-russian":"◄"},"ArrowDown":{"class":"ArrowDown","english":"▼","russian":"▼","shift-english":"▼","shift-russian":"▼"},"ArrowRight":{"class":"ArrowRight","english":"►","russian":"►","shift-english":"►","shift-russian":"►"},"ControlRight":{"class":"ControlRight","english":"Ctrl","russian":"Ctrl","shift-english":"Ctrl","shift-russian":"Ctrl"}}');class e{constructor(s){this.item=s}get(){return this.item}}let i="english",t=0,n=0,l=0;function a(){const s=document.createElement("div");s.className="container",document.body.append(s),function(s){const e=document.createElement("h1");e.className="title",e.innerText="RSS Виртуальная клавиатура",s.append(e)}(s),function(s){const e=document.createElement("textarea");e.className="textArea",e.rows=5,e.cols=50,s.append(e)}(s),function(s){const e=document.createElement("div");e.className="keyboard",s.append(e),function(){const s=document.querySelector(".keyboard");let e=document.createElement("div");e.className="row",s.append(e);for(let s=0;s<14;s+=1){let s=document.createElement("div");s.className="key",e.append(s)}}(),function(){const s=document.querySelector(".keyboard");let e=document.createElement("div");e.className="row",s.append(e);for(let s=0;s<15;s+=1){let s=document.createElement("div");s.className="key",e.append(s)}}(),function(){const s=document.querySelector(".keyboard");let e=document.createElement("div");e.className="row",s.append(e);for(let s=0;s<13;s+=1){let s=document.createElement("div");s.className="key",e.append(s)}}(),function(){const s=document.querySelector(".keyboard");let e=document.createElement("div");e.className="row",s.append(e);for(let s=0;s<13;s+=1){let s=document.createElement("div");s.className="key",e.append(s)}}(),function(){const s=document.querySelector(".keyboard");let e=document.createElement("div");e.className="row",s.append(e);for(let s=0;s<9;s+=1){let s=document.createElement("div");s.className="key",e.append(s)}}()}(s),function(s){const e=document.createElement("p");e.className="system-name",e.innerText="Клавиатура создана в операционной системе Windows",s.append(e)}(s),function(s){const e=document.createElement("p");e.className="language-change",e.innerText="Для переключения языка комбинация: ctrl + alt",s.append(e)}(s)}function c(i){document.querySelectorAll(".key").forEach((t=>{let n=new e(s[t.classList[1]]);t.innerText=`${n.item[i]}`}))}function h(){let s=document.querySelector(".CapsLock");s.classList.contains("active")?i="english"===i||"shift-english"===i?"shift-english":"shift-russian":s.classList.contains("active")||(i="english"===i||"shift-english"===i?"english":"russian"),c(i)}function r(){let s=document.querySelector(".textArea");(this.classList.contains("ShiftLeft")||this.classList.contains("ShiftRight"))&&("english"===i?(i="shift-english",c(i)):"russian"===i?(i="shift-russian",c(i)):"shift-english"===i?(i="english",c(i)):"shift-russian"===i&&(i="russian",c(i))),this.classList.contains("CapsLock")||this.classList.remove("active"),(this.classList.contains("Enter")||this.classList.contains("Delete")||this.classList.contains("Tab")||this.classList.contains("Backspace"))&&s.focus(),(l!==s.value.length||this.classList.contains("Space"))&&(s.focus(),s.setSelectionRange(l,l))}function u(){if(this.classList.contains("CapsLock")&&this.classList.contains("active"))this.classList.remove("active"),h();else{this.classList.add("active"),this.addEventListener("mouseup",r);let s=document.querySelector(".textArea");if(this.classList.contains("Backspace")){if(""!==s.value&&0!==l)if(l===s.value.length)s.value=`${s.value.slice(0,-1)}`,l-=1;else{let e=s.value.split("");e.splice(l-1,1),e=e.join(""),s.value=e,s.blur(),l-=1}}else if(this.classList.contains("CapsLock"))h();else if(this.classList.contains("Space")){let e=s.value.split("");e.splice(l,0," "),e=e.join(""),s.value=e,l+=1}else if(this.classList.contains("Tab")){let e=s.value.split("");e.splice(l,0,"    "),e=e.join(""),s.value=e,s.blur(),l+=4}else if(this.classList.contains("ShiftLeft")||this.classList.contains("ShiftRight"))"english"===i?(i="shift-english",c(i)):"russian"===i?(i="shift-russian",c(i)):"shift-english"===i?(i="english",c(i)):"shift-russian"===i&&(i="russian",c(i));else if(this.classList.contains("Enter"))if(s.focus(),l===s.value.length)s.value=`${s.value}\n`,l=s.selectionStart,s.focus();else if(0===l)s.value=`\n${s.value}`,l+=1,s.focus(),s.setSelectionRange(l,l);else{let e=s.value.split("");e.splice(l,0,"\n"),e=e.join(""),s.value=e,l+=1,s.focus(),s.setSelectionRange(l,l)}else if(this.classList.contains("MetaLeft"))s.blur();else if(this.classList.contains("Delete")){if(""!==s.value&&l!==s.value.length){let e=s.value.split("");e.splice(l,1),e=e.join(""),s.value=e,s.selectionStart=l,s.setSelectionRange(l,l)}}else if(this.classList.contains("ControlLeft")||this.classList.contains("AltLeft")||this.classList.contains("AltRight")||this.classList.contains("ControlRight"))s.blur();else{let e=s.value.split("");e.splice(l,0,`${this.innerText}`),e=e.join(""),s.value=e,s.blur(),l+=1}}}window.addEventListener("beforeunload",(function(){localStorage.setItem("language",i)})),window.addEventListener("load",(function(){localStorage.getItem("language")&&(i=localStorage.getItem("language"))})),window.onload=function(){a(),function(i){let t=0;for(let n in s){let l=document.querySelectorAll(".key")[t];t+=1;let a=new e(s[n]);l.className=`${l.className} ${a.item.class}`,l.innerText=`${a.item[i]}`}}(i),document.querySelectorAll(".key").forEach((s=>{s.addEventListener("mousedown",u)}));let h=document.querySelector(".textArea");document.addEventListener("keydown",(s=>{s.preventDefault();let e=document.querySelector(`.${s.code}`);if("CapsLock"===s.code&&1!==t)e.classList.contains("active")?("russian"===i||"shift-russian"===i?i="russian":"english"!==i&&"shift-english"!==i||(i="english"),c(i),e.classList.remove("active")):("russian"===i||"shift-russian"===i?i="shift-russian":"english"!==i&&"shift-english"!==i||(i="shift-english"),e.classList.add("active"),c(i));else if("Enter"===s.code)if(s.preventDefault(),e.classList.add("active"),l===h.value.length)h.value=`${h.value}\n`,l=h.selectionStart,h.focus();else if(0===l)h.value=`\n${h.value}`,l+=1,h.setSelectionRange(l,l);else{let s=h.value.split("");s.splice(l,0,"\n"),s=s.join(""),h.value=s,l+=1,h.setSelectionRange(l,l)}else if("Tab"===s.code){h.focus(),s.preventDefault(),e.classList.add("active");let i=h.value.split("");i.splice(l,0,"    "),i=i.join(""),h.value=i,l+=4,h.setSelectionRange(l,l)}else if("Tab"!==s.code&&"CapsLock"!==s.code&&"ShiftLeft"!==s.code&&"ControlLeft"!==s.code&&"MetaLeft"!==s.code&&"AltLeft"!==s.code&&"AltRight"!==s.code&&"ControlRight"!==s.code&&"ShiftRight"!==s.code&&"Enter"!==s.code&&"Delete"!==s.code&&"Backspace"!==s.code)if(e.classList.add("active"),h.blur(),"Space"===s.code){let s=h.value.split("");s.splice(l,0," "),s=s.join(""),h.value=s,l+=1,h.focus(),h.setSelectionRange(l,l)}else{let s=h.value.split("");s.splice(l,0,`${e.innerText}`),s=s.join(""),h.value=s,h.blur(),l+=1,l!==h.value.length&&(h.focus(),h.setSelectionRange(l,l))}else if("Backspace"===s.code){if(s.preventDefault(),e.classList.add("active"),""!==h.value&&0!==l)if(l===h.value.length)h.value=`${h.value.slice(0,-1)}`,l-=1;else{let s=h.value.split("");s.splice(l-1,1),s=s.join(""),h.value=s,l-=1,h.setSelectionRange(l,l)}}else if("Delete"===s.code){if(s.preventDefault(),e.classList.add("active"),""!==h.value&&l!==h.value.length){let s=h.value.split("");s.splice(l,1),s=s.join(""),h.value=s,h.selectionStart=l,h.setSelectionRange(l,l)}}else if("ControlLeft"===s.code||"AltLeft"===s.code||"ControlRight"===s.code||"AltRight"===s.code){s.preventDefault(),e.classList.add("active");let t=document.querySelector(".ControlLeft"),l=document.querySelector(".ControlRight"),a=document.querySelector(".AltLeft"),h=document.querySelector(".AltRight");("C"===s.code[0]&&1===n&&(a.classList.contains("active")||h.classList.contains("active"))||"A"===s.code[0]&&1===n&&(t.classList.contains("active")||l.classList.contains("active")))&&("english"===i?(i="russian",c(i)):"russian"===i?(i="english",c(i)):"shift-english"===i?(i="shift-russian",c(i)):"shift-russian"===i&&(i="shift-english",c(i))),n=1}else"ShiftLeft"!==s.code&&"ShiftRight"!==s.code||1===t?e.classList.add("active"):(t=1,s.preventDefault(),e.classList.add("active"),"english"===i?(i="shift-english",c(i)):"russian"===i?(i="shift-russian",c(i)):"shift-english"===i?(i="english",c(i)):"shift-russian"===i&&(i="russian",c(i)))})),document.addEventListener("keyup",(s=>{"ShiftLeft"===s.code||"ShiftRight"===s.code?(t=0,document.querySelector(`.${s.code}`).classList.remove("active"),"shift-english"===i?(i="english",c(i)):"shift-russian"===i?(i="russian",c(i)):"english"===i?(i="shift-english",c(i)):"russian"===i&&(i="shift-russian",c(i))):"CapsLock"!==s.code&&document.querySelector(`.${s.code}`).classList.remove("active"),n=0})),h.addEventListener("click",(()=>{l=h.selectionStart}))}})()})();